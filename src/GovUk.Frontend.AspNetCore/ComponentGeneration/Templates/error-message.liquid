{% assign visuallyHiddenText = params.visuallyHiddenText | nj_default: "Error" -%}
{% if params.html %}{% assign errorMessageText = params.html | strip | indent: 2 | raw %}{% else %}{% assign errorMessageText = params.text %}{% endif %}

<p {%- if params.id %} id="{{ params.id }}"{% endif %} class="govuk-error-message {%- if params.classes %} {{ params.classes }}{% endif %}"
  {{- params.attributes }}>
  {%- if visuallyHiddenText != blank %}
  <span class="govuk-visually-hidden">{{ visuallyHiddenText }}:</span> {{ errorMessageText }}
  {%- else %}
  {{ errorMessageText }}
  {%- endif %}
</p>